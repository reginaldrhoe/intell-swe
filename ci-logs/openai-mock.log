openai-mock-1  | INFO:     Started server process [1]
openai-mock-1  | INFO:     Waiting for application startup.
openai-mock-1  | INFO:     Application startup complete.
openai-mock-1  | INFO:     Uvicorn running on http://0.0.0.0:1573 (Press CTRL+C to quit)
openai-mock-1  | INFO:     172.18.0.1:42706 - "POST /v1/embeddings HTTP/1.1" 200 OK
openai-mock-1  | INFO:     172.18.0.3:58540 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:58556 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:58570 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:58572 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:58576 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:58590 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.6:57614 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.6:57630 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.6:57634 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:58602 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:58612 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:45180 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:45194 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:45210 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:45212 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:45220 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:45234 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:45250 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:45260 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:45268 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:45272 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:45274 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:45276 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:47786 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:47802 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:47816 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:47826 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:47830 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:47836 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:47846 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:47852 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:47862 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:47872 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:47882 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:47890 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:49088 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:49096 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:49110 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:49120 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:49130 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:49132 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:49146 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:49160 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:49162 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:49170 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:49186 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:49200 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:49210 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:49224 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:49228 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:53396 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:53404 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:53412 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:53418 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:53424 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:53434 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:53438 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:53446 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:53456 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:53464 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:53472 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:53480 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:57362 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:57364 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:57376 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:57386 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:57396 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:57408 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:57410 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:57424 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:57434 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:57446 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:57454 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:57464 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:56074 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:56082 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:56098 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:56108 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:56112 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:56126 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:56142 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:56148 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:56162 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:56172 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:56186 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:56188 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:56194 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:46156 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:46158 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:46170 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:46172 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:46176 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:46184 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:46198 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:46212 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:46222 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:46228 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:46242 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:46244 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:48446 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:48452 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:48460 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:48468 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:48482 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:48488 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:48504 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:48520 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:48528 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:48536 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:48550 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:48564 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:50794 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:50802 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:50804 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:50808 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:50810 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:50816 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:50822 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:50830 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:50834 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:50846 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:50848 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:50862 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:52116 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:52118 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:52134 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:52140 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:52152 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:52162 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:52166 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:52182 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:52194 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:52206 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:52214 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:52220 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:58064 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:58068 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:58072 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:58076 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:58090 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:58096 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:58104 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:58116 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:58132 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:58140 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:58144 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:58150 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:48690 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:48698 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:48708 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:48710 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:48716 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:48718 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:48730 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:48740 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:48744 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:48750 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:48766 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
openai-mock-1  | INFO:     172.18.0.3:48768 - "POST /v1/embeddings HTTP/1.1" 500 Internal Server Error
openai-mock-1  | ERROR:    Exception in ASGI application
openai-mock-1  | Traceback (most recent call last):
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
openai-mock-1  |     result = await app(  # type: ignore[func-returns-value]
openai-mock-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
openai-mock-1  |     return await self.app(scope, receive, send)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1134, in __call__
openai-mock-1  |     await super().__call__(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 107, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
openai-mock-1  |     await self.app(scope, receive, _send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
openai-mock-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
openai-mock-1  |     await self.middleware_stack(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
openai-mock-1  |     await route.handle(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
openai-mock-1  |     await self.app(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 125, in app
openai-mock-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
openai-mock-1  |     raise exc
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
openai-mock-1  |     await app(scope, receive, sender)
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 111, in app
openai-mock-1  |     response = await f(request)
openai-mock-1  |                ^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 391, in app
openai-mock-1  |     raw_response = await run_endpoint_function(
openai-mock-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 290, in run_endpoint_function
openai-mock-1  |     return await dependant.call(**values)
openai-mock-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 102, in embeddings
openai-mock-1  |     vec = _deterministic_vector(text or 'empty')
openai-mock-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
openai-mock-1  |   File "/app/mcp/openai_mock.py", line 10, in _deterministic_vector
openai-mock-1  |     h = hashlib.sha256(text.encode('utf-8')).digest()
openai-mock-1  |                        ^^^^^^^^^^^
openai-mock-1  | AttributeError: 'list' object has no attribute 'encode'
